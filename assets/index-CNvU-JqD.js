(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function e(e){let t=e.elem.querySelector(`.grave-slab`);t?.classList.contains(`open`)&&t?.classList.add(`closed`),t?.classList.remove(`open`)}function t(e){let t=e.elem.querySelector(`.grave-slab`);t?.classList.remove(`closed`),t?.classList.add(`open`)}function n(e){let t=e.item,n=e.elem.querySelector(`.grave-hole`);n?.setAttribute(`data-target`,t.target?`yes`:`no`),n?.style.setProperty(`--content`,`url(/objects/${t.name})`)}function r(e,t,n){let r=[];for(let o=0;o<e*2/3;o++)for(let s=0;s<e;s++){let c=o%3==2,l=o%3==1?s==0?a(t):null:i(t,c,n,(o-Math.floor((o+1)/3))*e+s);l&&l.type==`grave`&&r.push({elem:l.elem})}return t.style.setProperty(`--size`,e.toString()),r}function i(e,t,n,r){let i=document.querySelector(`#grave-template`);if(!i)throw Error(`Grave Tempate not found`);let a=document.createElement(`div`);return a.innerHTML=i.innerHTML,a.classList.add(`grave`),a.addEventListener(`click`,e=>n(e,r)),a.style.setProperty(`--random`,Math.floor(Math.random()*100).toString()),t&&a.classList.add(`flipped`),e.append(a),{elem:a,type:`grave`}}function a(e){let t=document.createElement(`div`);return t.classList.add(`path`),e.append(t),{elem:t,type:`path`}}var o=document.querySelector(`div#graveyard`);if(!o)throw Error(`Graveyard element not found`);var s=[],c=[`atom.svg`,`flash.svg`,`algol.png`,`hypercard.png`,`objectivec.svg`,`angularjs.png`,`silverlight.png`],l=r(4,o,u);l.reduce((e,t)=>(t.item=e.splice(Math.floor(Math.random()*e.length),1)[0],e),f(c).slice(0,l.length/2).flatMap(e=>[{name:e,target:!0},{name:e,target:!1}])),l.forEach(e=>n(e));function u(n,r){let i=l[r];i.item&&(i.elem.querySelector(`.grave-slab`)?.classList.contains(`open`)||s.length>=2||(t(i),s.push(r),s.length>=2&&i.elem.querySelector(`.grave-slab`)?.addEventListener(`animationend`,()=>{let t=s.map(e=>l[e]);if(t[0].item?.name==t[1].item?.name){console.log(`MATCH`);let n=t.find(e=>e.item?.target==0),r=t.find(e=>e.item?.target==1);if(!n||!r)return;let i=[r?.elem.querySelector(`.grave-hole`)?.getBoundingClientRect(),n?.elem.querySelector(`.grave-hole`)?.getBoundingClientRect()],a={x:(i[0]?.x||0)-(i[1]?.x||0),y:(i[0]?.y||0)-(i[1]?.y||0)},o=document.createElement(`div`),c=document.createElement(`img`);c.src=t[0].item?.name||``,c.alt=t[0].item?.name||`none`,c.style.width=(i[0]?.width||0)*.9+`px`||`0`,o.append(c),o.classList.add(`animated-container`),o.style.top=i[1]?.top+`px`,o.style.left=i[1]?.left+`px`,o.style.height=i[1]?.height+`px`,o.style.width=i[1]?.width+`px`,document.body.append(o),n.elem.classList.add(`empty`),o.addEventListener(`transitionend`,()=>{o.remove(),r.elem.classList.add(`complete`),l.map(e),s=[],r.elem.addEventListener(`animationend`,()=>{r.elem.classList.add(`hidden`),n.elem.classList.add(`hidden`),r.item=void 0,n.item=void 0,d()})},{once:!0}),setTimeout(()=>{o.style.transform=`translate(${a.x}px, ${a.y}px)`},100),s=[]}else setTimeout(()=>{console.log(s.map(e=>l[e].item)),s=[],l.map(e)},500)},{once:!0})))}function d(){l.every(e=>!e.item)&&console.log(`YOU WIN`)}function f(e){for(var t=e.length;--t;){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}